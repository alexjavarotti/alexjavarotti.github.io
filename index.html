<html>

<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart', 'bar'] });
        google.charts.setOnLoadCallback(drawStuff);

        function drawStuff() {

            var chartDiv = document.getElementById('chart_div');

            var dataURL1 = 'https://alexjavarotti.github.io/data.csv';
            var dataURL2 = 'https://raw.githubusercontent.com/alexjavarotti/alexjavarotti.github.io/develop/data/12052020/DT1_PAINEL_COVIDBR_20200512.csv'
            var storedText;
            var data;
            var view;

            // Acessing data from published CSV files:
            fetch(dataURL2)
                .then(function (response) {
                    response.text().then(function (text) {
                        storedText = text;
                        done();
                    });
                });

            function csvToArray(csv) {
                clean = csv.replace(/'/g, '');
                rows = clean.split("\n")
                return rows.map(function (row) {
                    return row.split(";");
                });
            };

            function done() {
                var array = csvToArray(storedText);
                var typed = array.map(function (row) {
                    return [
                        row[0],
                        row[7],
                        isNaN(row[10]) ? row[10] : parseFloat(row[10]),
                        isNaN(row[11]) ? row[11] : parseFloat(row[11])
                    ]
                });

                typed.pop();
                data = google.visualization.arrayToDataTable(typed);
                filtered_rows = data.getFilteredRows([{ column: 0, value: "Brasil" }])
                view = new google.visualization.DataView(data);
                view.setRows(filtered_rows);
                view.setColumns([1, 2, 3]);

                drawChart();
            }

            var materialOptions = {
                width: 1200,
                chart: {
                    title: 'Brasil',
                    subtitle: 'Casos e Ã³bitos'
                },
                series: {
                    0: { title: 'Casos', axis: 'casosAcumulado' }, // Bind series 0 to an axis named 'distance'.
                    1: { title: 'Obitos', axis: 'obitosAcumulado' } // Bind series 1 to an axis named 'brightness'.
                },
                vAxis: {
                    viewWindow: {
                        min: 0,
                        max: 200000
                    }
                }
            };

            function drawChart() {
                var materialChart = new google.charts.Bar(chartDiv);
                materialChart.draw(view, google.charts.Bar.convertOptions(materialOptions));
            }
        };
    </script>
</head>

<body>
    <br><br>
    <div id="chart_div" style="width: 800px; height: 500px;"></div>
</body>

</html>